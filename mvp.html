<script type="module">

// import kaboom lib
import kaboom from "https://unpkg.com/kaboom/dist/kaboom.mjs";

// initialize kaboom context
kaboom();

loadSprite("elephant","https://kaboomjs.com/sprites/bag.png")
loadSprite("obstacle","https://kaboomjs.com/sprites/snow.png")
scene("dumbogame", () => {
    

var obstacleSpeed = -5
var obstacleStartpos = width()-120
let score = 0
const player = add([// Create dumbo sprite
  // list of components
  sprite("elephant"),
  pos(80, 40),
  area(),
  body()
])

function makeObstacles(){// Creates 4 obstacles in random positions but on the same x axis
add([
    sprite("obstacle"),
    pos(obstacleStartpos, rand(10,200)),
    area(),
    "obstacle"
])
add([
    sprite("obstacle"),
    pos(obstacleStartpos, rand(10,590)),
    area(),
    "obstacle"
])
add([
    sprite("obstacle"),
    pos(obstacleStartpos, rand(10,590)),
    area(),
    "obstacle"
])
add([
    sprite("obstacle"),
    pos(obstacleStartpos, rand(500,height()-48)),
    area(),
    "obstacle"
])
}
action("obstacle", (obstacle) => {// Lets the obstacle move from right to left at whatever speed you choose
    obstacle.move(-500, 0);
});
loop(1.5, () => {// Creates 4 obstacles every 1.5 seconds
    makeObstacles();
})
player.collides("obstacle", () => {// When the player hits a obstacle go to game over screen
    go("endgame")
    
});

add([//Bottom Floor
	rect(width(), 48),
	pos(0, height() - 48),
	outline(4),
	area(),
	solid(),
	color(0, 0, 255),
])
add([//Top Roof
	rect(width(), 48),
	pos(0, 0),
	outline(4),
	area(),
	solid(),
	color(0, 0, 255),
])
keyPress("space", () => {// Jump when spac bar is pressed
        player.jump();
    
});
})
scene("endgame", () => {// Game over screen
    add([
        text("GAME OVER")
    ])
    keyPress("space", () => {
        go("dumbogame")
    })
})
go("dumbogame");// Start dumbo game

</script>